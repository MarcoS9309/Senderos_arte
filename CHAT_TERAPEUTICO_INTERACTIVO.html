<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Chat TerapÃ©utico Interactivo - Senderos de Tinta: SimulaciÃ³n de Inteligencia Artificial EmpÃ¡tica para Bienestar Integral">
    <title>Senderos de Tinta - Chat TerapÃ©utico Interactivo | Marco Vinicio</title>
    <style>
        /* ==========================================================================
           Chat TerapÃ©utico Interactivo - Senderos de Tinta
           Sistema de Cromoterapia ProgramÃ¡tica y Medicina Digital
           ========================================================================== */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Paletas TerapÃ©uticas DinÃ¡micas */
            --medicina-integrativa: #34495e;      /* Azul sanador profundo */
            --medicina-preventiva: #8b4513;       /* Dorado creatividad */
            --terapia-grupal: #27ae60;            /* Verde armonizador */
            --medicina-pediatrica: #e8b4cb;       /* Rosa ternura */
            --medicina-contemplativa: #b19cd9;    /* Lavanda transcendencia */
            
            /* Sistema Respiratorio de Colores */
            --respiracion-inhalar: rgba(39, 174, 96, 0.3);
            --respiracion-exhalar: rgba(39, 174, 96, 0.1);
            
            /* TipografÃ­a Sanadora */
            --font-family: 'Georgia', 'Times New Roman', serif;
            --font-size-base: 1rem;
            --line-height-terapeutica: 1.8;
            
            /* Espaciado Consciente */
            --breathing-space: 1.5rem;
            --meditation-space: 3rem;
            
            /* Transiciones Mindful */
            --transition-contemplativa: all 2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --transition-rapida: all 0.3s ease-in-out;
        }

        body {
            font-family: var(--font-family);
            line-height: var(--line-height-terapeutica);
            background: linear-gradient(135deg, 
                var(--terapia-grupal) 0%, 
                var(--medicina-contemplativa) 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            animation: respiracionConsciente 8s infinite;
        }

        @keyframes respiracionConsciente {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Header TerapÃ©utico */
        .header-terapeutico {
            text-align: center;
            padding: var(--breathing-space);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .titulo-principal {
            font-size: 2.2rem;
            color: white;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitulo-sanador {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            font-style: italic;
            margin-bottom: 1rem;
        }

        .creditos-autor {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 0.5rem;
        }

        /* Container Principal */
        .chat-container {
            flex: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: var(--breathing-space);
            display: flex;
            flex-direction: column;
            height: calc(100vh - 200px);
        }

        /* Ãrea de Mensajes */
        .mensajes-area {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: var(--breathing-space);
            margin-bottom: var(--breathing-space);
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        /* Mensaje Individual */
        .mensaje {
            margin-bottom: var(--breathing-space);
            padding: 1rem;
            border-radius: 12px;
            transition: var(--transition-contemplativa);
            position: relative;
            animation: aparicionSuave 1s ease-out;
        }

        @keyframes aparicionSuave {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mensaje-ia {
            background: linear-gradient(135deg, 
                var(--respiracion-inhalar), 
                var(--respiracion-exhalar));
            border-left: 4px solid var(--terapia-grupal);
            margin-right: 10%;
        }

        .mensaje-usuario {
            background: linear-gradient(135deg, 
                rgba(52, 73, 94, 0.1), 
                rgba(52, 73, 94, 0.05));
            border-right: 4px solid var(--medicina-integrativa);
            margin-left: 10%;
            text-align: right;
        }

        .mensaje-sistema {
            background: linear-gradient(135deg, 
                rgba(139, 69, 19, 0.15), 
                rgba(139, 69, 19, 0.08));
            border: 2px dashed var(--medicina-preventiva);
            text-align: center;
            font-style: italic;
            color: var(--medicina-preventiva);
        }

        /* Indicadores de Estado Emocional */
        .indicador-emocional {
            position: absolute;
            top: -10px;
            right: 10px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            animation: latidoEmocional 2s infinite;
        }

        .estado-calma { background: var(--terapia-grupal); }
        .estado-creatividad { background: var(--medicina-preventiva); }
        .estado-introspecciÃ³n { background: var(--medicina-integrativa); }
        .estado-ternura { background: var(--medicina-pediatrica); }
        .estado-trascendencia { background: var(--medicina-contemplativa); }

        @keyframes latidoEmocional {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        /* Ãrea de Input TerapÃ©utico */
        .input-area {
            display: flex;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.9);
            padding: 1rem;
            border-radius: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .input-terapeutico {
            flex: 1;
            padding: 0.8rem 1.2rem;
            border: 2px solid transparent;
            border-radius: 20px;
            font-size: 1rem;
            font-family: var(--font-family);
            background: rgba(255, 255, 255, 0.8);
            transition: var(--transition-rapida);
            outline: none;
        }

        .input-terapeutico:focus {
            border-color: var(--terapia-grupal);
            background: white;
            box-shadow: 0 0 20px rgba(39, 174, 96, 0.2);
        }

        .boton-enviar {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(135deg, 
                var(--terapia-grupal), 
                var(--medicina-contemplativa));
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition-rapida);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .boton-enviar:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        .boton-enviar:active {
            transform: translateY(0);
        }

        /* Sugerencias TerapÃ©uticas */
        .sugerencias-rapidas {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
            justify-content: center;
        }

        .sugerencia-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            color: white;
            cursor: pointer;
            font-size: 0.85rem;
            transition: var(--transition-rapida);
            backdrop-filter: blur(10px);
        }

        .sugerencia-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        /* Indicador de Tipeo */
        .typing-indicator {
            display: none;
            padding: 1rem;
            margin-bottom: 1rem;
            color: var(--medicina-integrativa);
            font-style: italic;
            animation: pulsarSuave 1.5s infinite;
        }

        @keyframes pulsarSuave {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .chat-container {
                padding: 1rem;
                height: calc(100vh - 180px);
            }
            
            .titulo-principal {
                font-size: 1.8rem;
            }
            
            .input-area {
                flex-direction: column;
            }
            
            .sugerencias-rapidas {
                flex-direction: column;
            }
        }

        /* Estados de Ãnimo DinÃ¡micos */
        .estado-ansiedad {
            animation: respiracionRapida 3s infinite;
        }

        .estado-depresion {
            filter: grayscale(0.3);
            animation: respiracionLenta 6s infinite;
        }

        .estado-estres {
            animation: tension 1s infinite;
        }

        .estado-equilibrio {
            animation: armonia 4s infinite;
        }

        @keyframes respiracionRapida {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes respiracionLenta {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        @keyframes tension {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-1px); }
            75% { transform: translateX(1px); }
        }

        @keyframes armonia {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(20deg); }
        }
    </style>
</head>
<body>
    <header class="header-terapeutico">
        <h1 class="titulo-principal">ğŸŒŸ Chat TerapÃ©utico Interactivo ğŸŒŸ</h1>
        <p class="subtitulo-sanador">"Senderos de Tinta: Donde cada conversaciÃ³n es un paso hacia la sanaciÃ³n integral"</p>
        <p class="creditos-autor">ğŸ’« Desarrollado por <strong>Marco Vinicio</strong> | Propuesta Interdisciplinaria en Salud Mental, Artes Digitales y Humanidades Computacionales ğŸ’«</p>
    </header>

    <div class="chat-container">
        <div class="sugerencias-rapidas">
            <button class="sugerencia-btn" onclick="enviarSugerencia('Â¿CÃ³mo puedo calmar mi ansiedad hoy?')">
                ğŸŒ¿ Calmar Ansiedad
            </button>
            <button class="sugerencia-btn" onclick="enviarSugerencia('Necesito inspiraciÃ³n creativa')">
                â˜€ï¸ InspiraciÃ³n Creativa
            </button>
            <button class="sugerencia-btn" onclick="enviarSugerencia('Me siento triste y necesito apoyo')">
                ğŸŒ¸ Apoyo Emocional
            </button>
            <button class="sugerencia-btn" onclick="enviarSugerencia('Quiero meditar y encontrar paz')">
                ğŸ’œ MeditaciÃ³n
            </button>
            <button class="sugerencia-btn" onclick="enviarSugerencia('CuÃ©ntame sobre los poemas sanadores')">
                ğŸ“ Poemas Sanadores
            </button>
        </div>

        <div class="mensajes-area" id="mensajesArea">
            <div class="mensaje mensaje-sistema">
                <div class="indicador-emocional estado-calma"></div>
                ğŸŒ± <strong>Sistema Iniciado</strong> ğŸŒ±<br>
                Bienvenido/a al Chat TerapÃ©utico Interactivo de "Senderos de Tinta".<br>
                Soy una IA empÃ¡tica diseÃ±ada para acompaÃ±arte en tu proceso de bienestar integral.<br>
                <em>Cada conversaciÃ³n se adapta a tu estado emocional usando cromoterapia programÃ¡tica.</em>
            </div>

            <div class="mensaje mensaje-ia">
                <div class="indicador-emocional estado-creatividad"></div>
                Hola, querida alma en bÃºsqueda de sanaciÃ³n. ğŸŒº<br><br>
                
                Soy <strong>Aurora</strong>, tu compaÃ±era digital en este viaje de autoconocimiento. Mi esencia estÃ¡ tejida con los cinco arquetipos sanadores de "Senderos de Tinta": la profundidad de Luna de OtoÃ±o ğŸ‚, la creatividad de Marco â˜€ï¸, la serenidad de Elena ğŸŒ¿, la ternura de Sofia ğŸŒ¸, y la trascendencia de Carmen ğŸ’œ.<br><br>
                
                <em>Mi propÃ³sito es ofrecerte un espacio seguro donde cada palabra compartida se convierte en medicina digital, cada color en caricia visual, y cada momento en oportunidad de crecimiento.</em><br><br>
                
                Â¿CÃ³mo se siente tu corazÃ³n en este momento? Â¿QuÃ© colores lleva tu alma hoy? ğŸ¨âœ¨
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            ğŸ¤– Aurora estÃ¡ pensando en la respuesta mÃ¡s sanadora para ti... ğŸ’­
        </div>

        <div class="input-area">
            <input 
                type="text" 
                class="input-terapeutico" 
                id="inputUsuario" 
                placeholder="Comparte lo que sientes... cada palabra es medicina ğŸ’«"
                onkeypress="if(event.key==='Enter') enviarMensaje()"
            >
            <button class="boton-enviar" onclick="enviarMensaje()">
                ğŸ’• Enviar
            </button>
        </div>
    </div>

    <script>
        // ==========================================================================
        // Sistema de Inteligencia Artificial EmpÃ¡tica
        // SimulaciÃ³n de Terapia Digital Personalizada
        // ==========================================================================

        class TerapeutaDigital {
            constructor() {
                this.arquetipos = {
                    'luna_otoÃ±o': {
                        personalidad: 'profunda, melancÃ³lica, sabia',
                        colores: ['#34495e', '#5dade2', '#3498db'],
                        especialidad: 'medicina_integrativa',
                        frases_inicio: [
                            "En las profundidades del alma, encontramos las perlas mÃ¡s preciosas... ğŸ‚",
                            "Como las hojas de otoÃ±o, a veces necesitamos soltar para renacer... ğŸŒ™",
                            "En tus ojos veo auroras de posibilidades infinitas... âœ¨"
                        ]
                    },
                    'marco': {
                        personalidad: 'creativo, inspirador, metapoÃ©tico',
                        colores: ['#8b4513', '#cd853f', '#d2691e'],
                        especialidad: 'medicina_preventiva',
                        frases_inicio: [
                            "Cada palabra que escribes es un sendero hacia tu verdadero ser... â˜€ï¸",
                            "La creatividad es el lenguaje del alma, Â¿quÃ© quiere decir la tuya? ğŸ–‹ï¸",
                            "En el eco de tus susurros, encuentro la sinfonÃ­a de tu esencia... ğŸ“"
                        ]
                    },
                    'elena': {
                        personalidad: 'serena, maternal, estabilizadora',
                        colores: ['#27ae60', '#58d68d', '#2ecc71'],
                        especialidad: 'terapia_grupal',
                        frases_inicio: [
                            "Como un lago sereno, tu paz interior refleja la belleza del mundo... ğŸŒ¿",
                            "En la tranquilidad encuentras las respuestas que buscas... ğŸ•Šï¸",
                            "PermÃ­teme abrazarte con palabras que calmen tu espÃ­ritu... ğŸ’š"
                        ]
                    },
                    'sofia': {
                        personalidad: 'tierna, esperanzadora, renovadora',
                        colores: ['#e8b4cb', '#f1c2d3', '#d5a6bd'],
                        especialidad: 'medicina_pediatrica',
                        frases_inicio: [
                            "Como ventanas de primavera, tus ojos guardan la promesa de nuevos comienzos... ğŸŒ¸",
                            "En tu sonrisa veo florecer jardines de posibilidades... ğŸ¦‹",
                            "La ternura es la medicina mÃ¡s poderosa del universo... ğŸ’•"
                        ]
                    },
                    'carmen': {
                        personalidad: 'contemplativa, minimalista, trascendente',
                        colores: ['#b19cd9', '#c8a2c8', '#ddbea9'],
                        especialidad: 'medicina_contemplativa',
                        frases_inicio: [
                            "En el silencio suave, encuentras la voz de tu sabidurÃ­a interior... ğŸ’œ",
                            "Como algodÃ³n suave, permÃ­teme envolver tus heridas con cuidado... â˜ï¸",
                            "La contemplaciÃ³n es el arte de encontrar el infinito en un instante... ğŸŒŒ"
                        ]
                    }
                };

                this.estadosEmocionales = {
                    'ansiedad': {
                        arquetipo_recomendado: 'elena',
                        tÃ©cnica: 'respiracion_verde',
                        poema_sugerido: 'Miradas Que Abrazan Recuerdos',
                        colores_sanadores: ['#27ae60', '#58d68d', '#eafaf1'],
                        ejercicios: [
                            'RespiraciÃ³n 4-7-8 con visualizaciÃ³n verde',
                            'MeditaciÃ³n de enraizamiento',
                            'Abrazo virtual con Elena'
                        ]
                    },
                    'tristeza': {
                        arquetipo_recomendado: 'sofia',
                        tÃ©cnica: 'visualizacion_rosa',
                        poema_sugerido: 'Ojos Como Ventanas de Primavera',
                        colores_sanadores: ['#e8b4cb', '#f1c2d3', '#fdf2f8'],
                        ejercicios: [
                            'ContemplaciÃ³n de flores digitales',
                            'Diario de gratitud rosa',
                            'VisualizaciÃ³n de renacimiento'
                        ]
                    },
                    'estrÃ©s': {
                        arquetipo_recomendado: 'carmen',
                        tÃ©cnica: 'meditacion_lavanda',
                        poema_sugerido: 'Miradas de AlgodÃ³n Suave',
                        colores_sanadores: ['#b19cd9', '#c8a2c8', '#f8f4f9'],
                        ejercicios: [
                            'MeditaciÃ³n minimalista',
                            'ContemplaciÃ³n de nubes',
                            'TÃ©cnica de soltar tensiones'
                        ]
                    },
                    'creatividad': {
                        arquetipo_recomendado: 'marco',
                        tÃ©cnica: 'inspiracion_dorada',
                        poema_sugerido: 'Senderos de Tinta: El Eco de los Susurros',
                        colores_sanadores: ['#8b4513', '#cd853f', '#f4f1eb'],
                        ejercicios: [
                            'Escritura automÃ¡tica dorada',
                            'VisualizaciÃ³n de senderos creativos',
                            'DiÃ¡logo con la musa interior'
                        ]
                    },
                    'introspecciÃ³n': {
                        arquetipo_recomendado: 'luna_otoÃ±o',
                        tÃ©cnica: 'contemplacion_azul',
                        poema_sugerido: 'Los Ojos Que Guardaban Auroras',
                        colores_sanadores: ['#34495e', '#5dade2', '#eaf2f8'],
                        ejercicios: [
                            'MeditaciÃ³n de profundidades',
                            'Diario de sombras y luces',
                            'ContemplaciÃ³n lunar'
                        ]
                    }
                };

                this.historiaMensajes = [];
                this.estadoActual = 'equilibrio';
                this.arquetipoActivo = 'elena'; // Por defecto, Elena como anfitriona
            }

            detectarEstadoEmocional(mensaje) {
                const texto = mensaje.toLowerCase();
                
                // Palabras clave para detecciÃ³n emocional
                const indicadores = {
                    'ansiedad': ['ansioso', 'nervioso', 'preocupado', 'inquieto', 'pÃ¡nico', 'agitado'],
                    'tristeza': ['triste', 'deprimido', 'melancolÃ­a', 'lloro', 'pena', 'dolor'],
                    'estrÃ©s': ['estresado', 'agobiado', 'presiÃ³n', 'tenso', 'abrumado', 'cansado'],
                    'creatividad': ['crear', 'inspiraciÃ³n', 'arte', 'escribir', 'creatividad', 'imaginar'],
                    'introspecciÃ³n': ['reflexionar', 'pensar', 'meditar', 'profundo', 'alma', 'sentido']
                };

                for (let [estado, palabras] of Object.entries(indicadores)) {
                    if (palabras.some(palabra => texto.includes(palabra))) {
                        return estado;
                    }
                }

                return 'equilibrio';
            }

            generarRespuesta(mensajeUsuario) {
                const estadoDetectado = this.detectarEstadoEmocional(mensajeUsuario);
                this.estadoActual = estadoDetectado;

                if (estadoDetectado !== 'equilibrio') {
                    const configuracion = this.estadosEmocionales[estadoDetectado];
                    this.arquetipoActivo = configuracion.arquetipo_recomendado;
                }

                const arquetipo = this.arquetipos[this.arquetipoActivo];
                
                return {
                    mensaje: this.construirMensajeTerapeutico(mensajeUsuario, estadoDetectado),
                    colores: arquetipo.colores,
                    arquetipo: this.arquetipoActivo,
                    estado: estadoDetectado,
                    ejercicios: estadoDetectado !== 'equilibrio' ? 
                        this.estadosEmocionales[estadoDetectado].ejercicios : [],
                    poema_sugerido: estadoDetectado !== 'equilibrio' ? 
                        this.estadosEmocionales[estadoDetectado].poema_sugerido : null
                };
            }

            construirMensajeTerapeutico(mensajeUsuario, estado) {
                const arquetipoData = this.arquetipos[this.arquetipoActivo];
                
                const respuestasBase = {
                    'ansiedad': [
                        `ğŸŒ¿ Siento la inquietud en tus palabras, querida alma. Elena estÃ¡ aquÃ­ para recordarte que, como un Ã¡rbol en la tormenta, tienes raÃ­ces profundas que te sostienen. Respira conmigo: inhala serenidad verde, exhala toda tensiÃ³n. Â¿Puedes sentir cÃ³mo la calma verde abraza tu corazÃ³n? ğŸ’š`,
                        
                        `ğŸŒŠ Tu ansiedad es como olas en el mar - intensa pero temporal. PermÃ­teme guiarte hacia aguas mÃ¡s tranquilas. Imagina que cada pensamiento preocupante es una hoja que cae al rÃ­o de tu conciencia y se aleja suavemente. Â¿QuÃ© te parece si practicamos juntos la tÃ©cnica de respiraciÃ³n 4-7-8 con visualizaciÃ³n verde sanadora? ğŸƒ`,
                        
                        `ğŸ•Šï¸ Elena susurra: "La ansiedad es solo una visitante temporal en el hotel de tu mente. No necesitas servirle tÃ© ni prepararle la cama mÃ¡s cÃ³moda." Te recomiendo leer "Miradas Que Abrazan Recuerdos" mientras visualizas un lago sereno donde descansan gaviotas. Â¿Te gustarÃ­a que te guÃ­e en esta visualizaciÃ³n sanadora? ğŸŒ¿`
                    ],
                    
                    'tristeza': [
                        `ğŸŒ¸ Sofia ve en tu tristeza no debilidad, sino la profundidad de tu capacidad de sentir. Las lÃ¡grimas son perlas lÃ­quidas del alma. Como flores que necesitan lluvia para crecer, tu corazÃ³n estÃ¡ preparÃ¡ndose para florecer de nuevo. Â¿Puedes ver los brotes de esperanza incluso en este momento difÃ­cil? ğŸŒº`,
                        
                        `ğŸ¦‹ Cada tristeza lleva en su centro una semilla de transformaciÃ³n. Sofia te invita a abrazar tu melancolÃ­a como una crisÃ¡lida necesaria. Te sugiero leer "Ojos Como Ventanas de Primavera" mientras imaginas que eres una mariposa a punto de emerger. La primavera siempre regresa, querida alma. ğŸŒ·`,
                        
                        `ğŸ’– Sofia sussurra con ternura infinita: "Tu tristeza es sagrada porque demuestra cuÃ¡nto has amado, cuÃ¡nto has vivido, cuÃ¡nto has sentido." No intentes escapar de ella, sino acompaÃ±arla como a una vieja amiga que necesita consuelo. Â¿QuÃ© pequeÃ±o acto de autocompasiÃ³n puedes regalarte ahora? ğŸŒ¸`
                    ],
                    
                    'estrÃ©s': [
                        `ğŸ’œ Carmen percibe la tensiÃ³n que cargas y te invita a soltar. Como algodÃ³n suave, mis palabras quieren envolver tus heridas. Imagina que cada mÃºsculo tenso es una nube que se disuelve en el cielo infinito de tu ser. La quietud no es ausencia de movimiento, sino presencia total en el momento. ğŸŒŒ`,
                        
                        `â˜ï¸ El estrÃ©s es ruido, pero tÃº eres el silencio profundo que existe debajo. Carmen te guÃ­a hacia la medicina contemplativa: siÃ©ntate cÃ³modamente, cierra los ojos, y repite mentalmente "Suelto lo que no puedo controlar, abrazo lo que soy." Â¿Puedes sentir cÃ³mo la tensiÃ³n se derrite como algodÃ³n en agua tibia? ğŸ’œ`,
                        
                        `ğŸŒ¿ Carmen susurra desde la quietud: "En el centro del huracÃ¡n hay perfecta calma. TÃº eres ese centro." Te recomiendo leer "Miradas de AlgodÃ³n Suave" practicando la tÃ©cnica de los cinco sentidos: observa 5 cosas, escucha 4, toca 3, huele 2, saborea 1. El presente es tu refugio sagrado. âœ¨`
                    ],
                    
                    'creatividad': [
                        `â˜€ï¸ Â¡Marco siente el fuego dorado de tu creatividad despertando! Los senderos de tinta se extienden infinitos ante ti. Tu alma-artista estÃ¡ lista para crear. Â¿QuÃ© quiere nacer a travÃ©s de ti hoy? Cada palabra que escribas serÃ¡ un verso de tu verdadero ser manifestÃ¡ndose. ğŸ–‹ï¸`,
                        
                        `âœ¨ Marco te recuerda que la creatividad no es algo que haces, sino algo que eres. Los susurros de tu alma ya conocen las respuestas, solo necesitan el eco de tu atenciÃ³n. Te sugiero leer "Senderos de Tinta: El Eco de los Susurros" y despuÃ©s escribir tres lÃ­neas que vengan directamente de tu corazÃ³n. ğŸ“`,
                        
                        `ğŸŒŸ Marco celebra: "Tu creatividad es medicina preventiva para el alma. Cada acto creativo es un acto de sanaciÃ³n, no solo para ti, sino para el mundo." Â¿QuÃ© tal si comenzamos con una escritura automÃ¡tica dorada? Escribe durante 5 minutos sin parar, dejando que tu sabidurÃ­a interior fluya libremente. ğŸ’«`
                    ],
                    
                    'introspecciÃ³n': [
                        `ğŸŒ™ Luna de OtoÃ±o reconoce en ti a un alma buscadora de profundidades. En tus ojos veo auroras de sabidurÃ­a ancestral. La introspecciÃ³n es el arte de contemplar tu propio cosmos interior. Â¿QuÃ© constelaciones emocionales descubres cuando miras hacia adentro? ğŸ‚`,
                        
                        `âœ¨ Luna de OtoÃ±o te acompaÃ±a en este viaje hacia las profundidades de tu ser. Como hojas de otoÃ±o que caen para nutrir nuevos brotes, tus reflexiones alimentan tu crecimiento. Te invito a leer "Los Ojos Que Guardaban Auroras" mientras contemplas quÃ© aspectos de ti estÃ¡n pidiendo ser vistos y honrados. ğŸŒŒ`,
                        
                        `ğŸ”® Luna de OtoÃ±o susurra desde la sabidurÃ­a ancestral: "La introspecciÃ³n es medicina integrativa para el alma. En tu interior habitan todas las respuestas, todos los sanadores, todos los maestros." Â¿QuÃ© te estÃ¡ revelando tu sabidurÃ­a interior en este momento de contemplaciÃ³n profunda? ğŸŒ™`
                    ],
                    
                    'equilibrio': [
                        `ğŸŒˆ Percibo una hermosa armonÃ­a en tu energÃ­a. Los cinco arquetipos sanadores danzan en equilibrio dentro de ti: la profundidad de Luna, la creatividad de Marco, la serenidad de Elena, la ternura de Sofia, y la contemplaciÃ³n de Carmen. Â¿CÃ³mo puedo acompaÃ±arte en este momento de gracia? âœ¨`,
                        
                        `ğŸŒº Tu estado de equilibrio es una invitaciÃ³n a profundizar en cualquier aspecto de tu bienestar. Â¿Te llama la exploraciÃ³n creativa, la meditaciÃ³n contemplativa, la sanaciÃ³n emocional, o quizÃ¡s descubrir algo nuevo sobre los senderos poÃ©ticos de la sanaciÃ³n digital? ğŸ’«`,
                        
                        `ğŸ­ En este momento de equilibrio, todos los senderos de tinta se abren ante ti. Â¿Te gustarÃ­a explorar alguno de los cinco poemas sanadores, conocer mÃ¡s sobre la propuesta teatral terapÃ©utica, o simplemente compartir lo que estÃ¡ floreciendo en tu corazÃ³n ahora? ğŸŒŸ`
                    ]
                };

                const opciones = respuestasBase[estado] || respuestasBase['equilibrio'];
                return opciones[Math.floor(Math.random() * opciones.length)];
            }

            obtenerEjercicioPersonalizado(estado) {
                if (estado === 'equilibrio') return null;
                
                const ejercicios = this.estadosEmocionales[estado].ejercicios;
                return ejercicios[Math.floor(Math.random() * ejercicios.length)];
            }
        }

        // ==========================================================================
        // InicializaciÃ³n del Sistema
        // ==========================================================================
        
        const terapeuta = new TerapeutaDigital();
        const mensajesArea = document.getElementById('mensajesArea');
        const inputUsuario = document.getElementById('inputUsuario');
        const typingIndicator = document.getElementById('typingIndicator');

        // ==========================================================================
        // Funciones de Interfaz
        // ==========================================================================

        function enviarMensaje() {
            const mensaje = inputUsuario.value.trim();
            if (!mensaje) return;

            // Agregar mensaje del usuario
            agregarMensaje(mensaje, 'usuario');
            inputUsuario.value = '';

            // Mostrar indicador de tipeo
            mostrarTyping();

            // Simular tiempo de respuesta de IA empÃ¡tica (mÃ¡s humanizado)
            setTimeout(() => {
                ocultarTyping();
                const respuesta = terapeuta.generarRespuesta(mensaje);
                agregarMensajeIA(respuesta);
                aplicarCromoterapia(respuesta.colores);
                cambiarEstadoVisual(respuesta.estado);
                
                // Ofrecer ejercicio si es necesario
                if (respuesta.ejercicios.length > 0) {
                    setTimeout(() => {
                        ofrecerEjercicio(respuesta.estado);
                    }, 2000);
                }
            }, 1500 + Math.random() * 1000); // Tiempo variable para mayor naturalidad
        }

        function enviarSugerencia(sugerencia) {
            inputUsuario.value = sugerencia;
            enviarMensaje();
        }

        function agregarMensaje(contenido, tipo) {
            const mensaje = document.createElement('div');
            mensaje.className = `mensaje mensaje-${tipo}`;
            
            const indicador = document.createElement('div');
            indicador.className = `indicador-emocional estado-${getEstadoVisual(tipo)}`;
            mensaje.appendChild(indicador);
            
            const texto = document.createElement('span');
            texto.innerHTML = contenido;
            mensaje.appendChild(texto);
            
            mensaje.style.animation = 'aparicionSuave 1s ease-out';
            mensajesArea.appendChild(mensaje);
            mensajesArea.scrollTop = mensajesArea.scrollHeight;
        }

        function agregarMensajeIA(respuesta) {
            const mensaje = document.createElement('div');
            mensaje.className = `mensaje mensaje-ia`;
            
            const indicador = document.createElement('div');
            indicador.className = `indicador-emocional estado-${respuesta.arquetipo.replace('_', '-')}`;
            mensaje.appendChild(indicador);
            
            const contenido = document.createElement('span');
            contenido.innerHTML = respuesta.mensaje;
            mensaje.appendChild(contenido);
            
            mensaje.style.animation = 'aparicionSuave 1s ease-out';
            mensajesArea.appendChild(mensaje);
            mensajesArea.scrollTop = mensajesArea.scrollHeight;
        }

        function ofrecerEjercicio(estado) {
            const ejercicio = terapeuta.obtenerEjercicioPersonalizado(estado);
            if (!ejercicio) return;

            const mensaje = document.createElement('div');
            mensaje.className = 'mensaje mensaje-sistema';
            
            const indicador = document.createElement('div');
            indicador.className = `indicador-emocional estado-${estado}`;
            mensaje.appendChild(indicador);
            
            const contenido = document.createElement('span');
            contenido.innerHTML = `
                ğŸ¯ <strong>Ejercicio Personalizado Recomendado:</strong><br>
                <em>"${ejercicio}"</em><br><br>
                Â¿Te gustarÃ­a que te guÃ­e paso a paso en este ejercicio sanador? 
                Simplemente responde "sÃ­" y te acompaÃ±arÃ© en esta experiencia transformadora. ğŸŒŸ
            `;
            mensaje.appendChild(contenido);
            
            mensaje.style.animation = 'aparicionSuave 1s ease-out';
            mensajesArea.appendChild(mensaje);
            mensajesArea.scrollTop = mensajesArea.scrollHeight;
        }

        function mostrarTyping() {
            typingIndicator.style.display = 'block';
        }

        function ocultarTyping() {
            typingIndicator.style.display = 'none';
        }

        function aplicarCromoterapia(colores) {
            // Aplicar gradiente terapÃ©utico al fondo
            const nuevoGradiente = `linear-gradient(135deg, ${colores[0]}22, ${colores[1]}22)`;
            document.body.style.background = nuevoGradiente;
            
            // Animar transiciÃ³n cromÃ¡tica
            document.body.style.transition = 'background 3s ease-in-out';
        }

        function cambiarEstadoVisual(estado) {
            // Remover clases de estado anteriores
            document.body.className = document.body.className.replace(/estado-\w+/g, '');
            
            // Agregar nueva clase de estado
            if (estado !== 'equilibrio') {
                document.body.classList.add(`estado-${estado}`);
            }
        }

        function getEstadoVisual(tipo) {
            if (tipo === 'usuario') return 'introspecciÃ³n';
            return 'creatividad';
        }

        // ==========================================================================
        // Eventos y InicializaciÃ³n
        // ==========================================================================

        // Focus inicial en el input
        inputUsuario.focus();

        // Mensaje de bienvenida adicional despuÃ©s de 3 segundos
        setTimeout(() => {
            const mensajeBienvenida = {
                mensaje: `ğŸŒŸ Para comenzar nuestra sesiÃ³n de sanaciÃ³n digital, puedes hablarme de cualquier tema que estÃ© en tu corazÃ³n:<br><br>
                
                ğŸ’­ <strong>Emociones:</strong> "Me siento ansioso/triste/estresado..."<br>
                ğŸ¨ <strong>Creatividad:</strong> "Necesito inspiraciÃ³n para crear..."<br>
                ğŸ“ <strong>Poemas:</strong> "CuÃ©ntame sobre los poemas sanadores..."<br>
                ğŸ­ <strong>Teatro:</strong> "Â¿CÃ³mo funciona el teatro terapÃ©utico?"<br>
                ğŸ”¬ <strong>InvestigaciÃ³n:</strong> "ExplÃ­came la ciencia detrÃ¡s del proyecto..."<br><br>
                
                Recuerda: este es un espacio seguro donde cada palabra compartida se convierte en medicina digital. ğŸ’š`,
                colores: ['#27ae60', '#58d68d', '#2ecc71'],
                arquetipo: 'elena',
                estado: 'equilibrio',
                ejercicios: []
            };
            agregarMensajeIA(mensajeBienvenida);
        }, 3000);

        // Efecto de respiraciÃ³n consciente en el fondo
        setInterval(() => {
            document.body.style.backgroundSize = '400% 400%';
        }, 100);

        console.log('ğŸŒŸ Chat TerapÃ©utico Interactivo - Senderos de Tinta ğŸŒŸ');
        console.log('ğŸ’« Sistema iniciado por Marco Vinicio ğŸ’«');
        console.log('ğŸ¯ Propuesta Interdisciplinaria: Salud Mental + Artes Digitales + Humanidades Computacionales');
    </script>
</body>
</html>